---
toc: true
title:  "ChromeOS の Linux コンテナを複数用意する"
date:   2024-06-02 09:00:00 +0900
categories: トラブル
tags:
- 不具合対処
- コンテナ
- ChromeOS
- Linux
---
ChromeOS は Linux カーネルで動作していますが、基本的には Chrome ブラウザをインターフェースとして使用する形になると思います。crosh というシェルもありますが、これは一部のコマンドしかサポートされません。デベロッパーモードにすればシェルアクセスが可能になりますが、デベロッパーモードは一度初期化が必要ですし、セキュリティレベルも下がります。

開発者向けの機能として、Linux 実行環境がサポートされます。以前は GUI を出したり日本語入力をしたりに一工夫が必要でしたが、ほぼ標準状態で GUI も使用できるようになりましたし、ChromeOS の日本語入力がそのまま Linux の GUI アプリで使用できます。この Linux はコンテナで実行され、ほぼ素の debian が動作するような形になっています。

コンテナなので不具合があったら作り直しも簡単なのですが、いろいろと試してみたいときに、既存の環境に影響を与えてしまうと面倒なのですが、どうやら複数の Linux コンテナを実行する事が可能なようです。


1. Chrome ブラウザを開き、アドレス欄に `chrome://flags` と入力してエンター
1. Experiments メニューが表示されるので、検索欄に `crostini` と入力する
1. 以下のように `Allow multiple Crostini containers` が表示されるので、`Default` を `Enable` に変更する

![flags][img1]


変更後、再ログインして設定の「Linux 開発環境」を開くと、以下のように「他のコンテナの管理」というメニューが追加されているはずです。

![administration][img2]


これを開くと、新たなコンテナを追加する「作成」ボタンや、既存のコンテナの停止・バックアップや削除が可能です。

![menu][img3]

![submenu][img4]


コンテナを作成する場合は、標準のコンテナ以外にも、バックアップファイルからの復元もできるようですね。

![make][img5]


コンテナを分けておけば、複数の環境を併用することができて便利ですよね。ある程度お気に入りのアプリケーションをインストールした状態をバックアップしておいて、そこからコンテナを作るようにすれば気軽に試すことができそうです。

設定メニューに GUI も用意されているので、問題なく使用できる機能だと思います。ただ、使わない人には不要なメニューだと思うので、隠しメニューにしている理由もわかる気がします。



[img1]:/assets/images/2024/06/Screenshot 2024-05-24 09.19.14.png
[img2]:/assets/images/2024/06/Screenshot 2024-05-24 09.20.34.png
[img3]:/assets/images/2024/06/Screenshot 2024-05-24 09.20.41.png
[img4]:/assets/images/2024/06/Screenshot 2024-05-24 13.31.11.png
[img5]:/assets/images/2024/06/Screenshot 2024-05-24 13.20.45.png
